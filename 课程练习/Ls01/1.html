<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ch01</title>
</head>

<body>
    <script>
        //2019/2/25
        //避免滥用全局变量,见demo2.js
        var x = 10;
        document.onclick = function () {
            //console.log("x = ",x);
            alert("x = " + x);
        };


        /*
        //如何避免全局污染，使用IIFE函数立即执行表达式
        (function () {  // 开始
            var x = 10;
            document.onclick = function () {
                //console.log("x = ",x);
                alert("x = "+x);
            };
        })();           // 结束
        */




        //基本语法回顾
        var x;//变量声明 区分声明与定义（对比其他语言 JS的语言特点，动态类型、弱类型）语句
        x = 23;//表达式作为语句时（赋值表达式语句）

        //条件语句
        if (x > 22) {
            x += 2;
        } else {
            console.log("x 不大于 22");
        }

        var xx = 234;
        if (234 == xx) { //为什么要反写？？？？？
            console.log("相等");
        }

        //思考
        console.log(a);
        if (true) {
            var a = 2;
        }
        console.log(a);

        console.log(b);
        if (false) {
            var b = 3;
        }
        console.log(b);


        //循环语句
        for (var i = 0; i < 3; i++) {
            console.log("i:", i);
        }
        console.log(i);//是否会报错，若不报错的话此时i为多少？？？？？

        //函数定义及调用   提问：函数有几种定义方式？？？？？
        function max(x, y) {
            return x > y ? x : y;
        }
        console.log(max(2, 3));



        //复合运算符
        var a = 3;
        a += 5;
        console.log(a);

        //标识符规则一下哪个不合法
        // _str
        // num
        // $abc
        // 8def

        //保留字回顾 认识多少?????
        //arguments break continue typeof instanceof delete等等

        console.log(typeof NaN);//什么类型
        console.log(typeof Infinity);



        //数据类型
        var num = 1;
        var str = "some string";
        var b = true;
        var n = null;
        var u = undefined;//如果没赋值的话，是什么情况

        var arr = ["apple", "pear", "banana"];
        var func = function () {
            return "this a function";
        };
        var obj = new Object();
        obj.name = "test";

        console.log("\n");
        console.log(typeof num); //number
        console.log(typeof str); //string
        console.log(typeof b); //boolean
        console.log(typeof n); //这里返回的是object，这是JS语言的特别之处
        console.log(typeof u); //undefined
        console.log("\n");
        console.log(typeof arr); //object
        console.log(typeof func); //function
        console.log(typeof obj); //object

        //思考
        console.log(typeof Number); //
        console.log(typeof String); //
        console.log(typeof Boolean); //
        console.log(typeof Object); //
        console.log(typeof Array); //
        console.log(typeof Function); //
        console.log(typeof RegExp); //
        console.log(typeof Error); //
        console.log(typeof Math); //
        console.log(typeof JSON);

        //==、=== 回顾 值类型与引用类型回顾 不同类型变量 判等时的区别
        //判等步骤
        //1.看是==还是===

        //2.如果是===则先看类型
        // 类型不同肯定false
        // 类型相同（如果是基本类型：判断值是否相等；  如果是引用类型：判断引用是否是同一个引用）

        //3.如果是==则先看类型
        // 先试着进行类型转换
        // 转换后（如果是基本类型：判断值是否相等；   如果是引用类型：判断引用是否是同一个引用）
        var a1 = 2;
        var a2 = "2";
        console.log(a1 == a2);//true or false 原理是什么？？？？？
        console.log(a1 === a2);

        var b1 = {};
        var b2 = {};
        console.log(b1 == b2);//true or false 原理是什么？？？？？
        console.log(b1 === b2);//true or false
        console.log(b1 === b1);//true or false

        //进一步理解
        var c1 = 23;
        var c2 = new Number(23);
        console.log(c1 == c2);//true or false 原理是什么？？？？？
        console.log(c1 === c2);//true or false

        //包装对象
        var str2 = "abc";
        console.log(str2.length);
        str2.length = 1;
        console.log(str2);//原始类型变量的不可变性，指的是包装对象的改变并不影响原始类型的变量

        //怎么理解JS中都是对象这句话
        //访问基本类型的变量属性时，会创建临时包装对象，访问的是该包装对象的属性
        //另外改变此临时包装对象的属性，并不会影原变量（原始类型变量的不可变性）

        //undefined与null 未确定的值、空引用

        //typeof 与 instance
        //typeof 常用于检测基本类型的变量
        //instance 常用于检测引用类型的变量 instance左侧期望是一个对象，右侧期望是一个类型
        console.log({} instanceof Object);
        console.log([] instanceof Object);
        console.log([] instanceof Array);



        //布尔类型与逻辑运算符

        //逻辑与、或的基本理解
        console.log(2 > 1 && 4 < 5);
        console.log(true && (!2));
        console.log(false && ("2" == 2));
        console.log(false && false);

        console.log(2 > 1 || 4 < 5);
        console.log(true || (!2));
        console.log(false || ("2" == 2));
        console.log(false || false);

        //数字类型
        console.log(1 === 1.0);
        console.log(Number("xyz"));
        console.log(3 / 0);

        var a = 10;
        console.log(++a);

        var b = 20;
        console.log(b++);

        //字符串链接
        var a = "abc";
        var b = "def";
        var c = a + b;

        //字符串常用方法，字符串的方法源于String.prototype
        var str1 = "aaa".concat("bbb");//返回字符串
        var str2 = "abcdef".slice(2);
        var str3 = "abcdef".slice(2, 5);
        var str4 = "abcdef".slice(-2);
        var str5 = "abcdef".slice(2, -2);

        var str6 = "abcdef".split("c");//返回数组
        var str7 = "abcdef".split("c", 1);
        var str8 = "abcdef".split("c", 2);

        var str9 = "abcdef".charAt(2);
        var str10 = "abcdefabcdef".indexOf("d", 1);
        var str11 = "abcdefabcdef".indexOf("d", 4);//从第4个开始找

        var str12 = "    abc def     \r\n  ".trim();//返回已移除前导空格、尾随空格和行终止符的原始字符串

        //substr 与 substring的区别
        var str13 = "abcdefghijklmn";
        var str14 = str13.substr(2, 5);//后一个参数代表长度
        console.log(str13, str14);//str13 未受到破坏

        var str15 = str13.substring(2, 5);//后一个参数代表第几个end
        console.log(str13, str15);//str13 未受到破坏

        //循环语句
        for (var i = 0; i < 10; i++) {
            console.log("i:", i);
        }
        console.log("out of for:", i);//此时为多少

        //break和continue
        //练习输出0到20之间的奇数

        //函数定义 注意分号
        function max(a, b) {
            return a > b ? a : b;
        }
        console.log(max(2, 3));

        var min = function (a, b) {
            return a < b ? a : b;
        };
        console.log(min(2, 3));

        //函数声明的提升，初步了解，详细内容见函数章节
        foo();//可以在定义前执行，解析器会将foo函数声明提升
        function foo() {
            console.log("foo");
        }

        //函数参数数量问题回顾
        function f1() {
            console.log(arguments);
            var argArr = Array.prototype.slice.call(arguments);
            console.log(argArr);
        }
        f1(2, 3, 4, "a");

        function f2(a, b, c, d) {
            console.log(a, b, c, d);
        }
        f2(2, 3);

        //函数默认值部分，参见逻辑运算符进阶章节

        //异常捕获参见异常捕获章节

        //严格模式与非严格模式（松散模式），严格模式的作用是什么
        //"use strict"
        function f3() {
            //"use strict"
            gVar = 23;//定义了全局变量gVar，严格模式下是不允许的
        }


        //变量作用域，了解词法作用域（静态性）
        var x = 23;
        var foo = function () {
            var x = 34;
            console.log("inside x:", x);//输出多少
            y = 45;//加var和不加var的区别
            console.log("inside y:", y);//输出多少
        };
        foo();//如果没调用会如何
        console.log("outside x:", x);
        console.log("outside y:", y);


        //预解析和ES5作用域 实例
        console.log(a);//输出什么
        if (true) {
            var a = 2;
        }
        console.log(a);//输出什么


        //闭包 具体内容参见 闭包章节
        //闭包是由函数和与其相关的引用环境组合而成的实体
        //闭包是在其词法上下文中引用了自由变量的函数

        //立即执行表达式 IIFE
        (function (x, y) {
            return x > y ? x : y;
        }(4, 5));

        var result = function min(x, y) {
            return x < y ? x : y;
        }(2, 3);
        console.log(result);


        //JS对象
        //通过字面量创建
        var student = {
            name: "Jack",
            age: 23,
            sayHi: function () {
                console.log("Hi,i'm", this.name, ",i'm", this.age, "years old!");
            }
        };
        console.log(student.name);
        console.log(student["age"]);
        console.log(student.sayHi);
        student.sayHi();

        //添加属性，删除属性
        student.id = 2015015001;
        console.log(student.id);
        delete student.id;
        console.log(student.id);

        //查看对象是否有某个属性 in   for...in   Object.keys()
        console.log("name" in student);
        for (var k in student) {
            console.log(k, student[k]);
        }
        console.log(Object.keys(student));

        //JS对象详细内容参见 JS对象章节
        //函数嵌套 与this问题初步了解
        var obj = {
            foo: function () {
                console.log("foo里的this:", this);
                function fee() {
                    //"use strict"
                    console.log("fee里的this:", this);
                }
                fee();
            }
        };
        obj.foo();

        //构造函数回顾 JS面向对象具体内容 参见后续面向对象章节
        function Person(name, age) {
            this.name = name;
            this.age = age;
        }
        Person.prototype.showInfo = function () {
            console.log("Hi,i'm", this.name, ",i'm", this.age, "years old!");
        };

        var p1 = new Person("Mike", 60);
        p1.showInfo();


        //数组回顾
        //字面量创建数组
        var arr1 = [2, 3, "a", "b"];
        console.log(arr1);

        //访问与改变数组
        console.log(arr1[2]);
        console.log(arr1.length);
        arr1.length -= 1;
        console.log(arr1);

        //数组相关方法回顾
        ///////////////////////////////
        var arr2 = ['a', 'b', 'c'];
        var arr3 = arr2.slice(1, 2);//并不破坏arr2
        // var arr3 = arr2.slice(1);
        console.log(arr2);
        console.log(arr3);

        //////////////////////////////
        var arr4 = ['m', 'n'];
        var pushReturn = arr4.push('o');
        console.log(pushReturn);//push后数组的长度
        console.log(arr4);

        var popReturn = arr4.pop();
        console.log(popReturn);//pop出的元素
        console.log(arr4);

        ////////////////////////////////
        var arr5 = [1, 2, 3, 4];
        var shiftReturn = arr5.shift();
        console.log(shiftReturn);//shift移除的元素
        console.log(arr5);

        var unshiftReturn = arr5.unshift(0);
        console.log(unshiftReturn);//unshift后数组的长度
        console.log(arr5);

        /////////////////////////////
        var arr6 = ["ab", "cd", "ef"];
        console.log(arr6.indexOf("cd"));

        var joinReturn1 = arr6.join();
        console.log(joinReturn1);

        var joinReturn2 = arr6.join('-');
        console.log(joinReturn2);

        //////////////批量删除元素，破坏性操作，具体参见Array章节//////////////
        var arr7 = ["x", "y", "z"];
        var arr8 = arr7.splice(1, 1, "m");
        console.log(arr7, arr8);

        //正则 参见正则章节

        //标准函数 console.*
        console.log("log message");
        console.error("error message");
        console.warn("warn message");
        console.assert(3 > 2, "assert message");//断言
        console.trace();//用于调试追踪

    </script>
</body>

</html>